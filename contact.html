<!doctype html>
<html lang="pt-br">
    <head>
        <title>full stack developer</title>
        <link rel="icon" href="./images/logo.png">

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">

        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="css/style.css">

        <!-- HTML%Shiv -->
        <!--[if lt IE 9]>
        <script src="bower_components/html5shiv/dist/html5shiv.js"></script>
        <![endif]-->
    </head>
    <body class="contact">
        <header><!-- Start header -->    
            <nav class="navbar navbar-expand-md navbar-light fixed-top navbar-clear"><!-- Start navbar -->
                <div class="container"><!-- Start container -->
                    <a href="landing.html" class="navbar-brand d-flex">
                        <img src="images/logo.png" width="50">
                        <p class='h3 mt-2 ml-2 nav-title'>carlos ribeiro</p>
                    </a>
                    <button class="navbar-toggler" data-toggle="collapse" data-target="#main-nav">
                        <i class="fas fa-bars text-white"></i>
                    </button>
                    <div class="collapse navbar-collapse" id="main-nav">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="about-parallax.html">about</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="portfolio.html">portfolio</a>
                            </li>
                            <li class="nav-item divider"></li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">contact</a>
                            </li>
                        </ul>
                    </div>
                </div><!-- End container -->
            </nav><!-- End navbar -->
        </header><!-- End header -->

    <section id="home" class="d-flex"><!-- Start home -->
        <div class="container align-self-center"><!-- container -->
            <div class="row"><!-- row -->
                <div class="col-12">
                    <h1 class="title_contact">contact me</h1>
                </div>

                <form class="col-12 d-flex flex-wrap form_contact" action="https://formspree.io/f/xzbkqabb" method="POST" id="send_message">
                    <div class="col-6">
                        <div class="mb-3">
                            <label for="name_input" class="form-label h3">your name</label>
                            <input type="text" class="form-control" id="name_input" name="name_input" placeholder="name..." required>
                        </div>                       
                        <div>
                            <label for="email_input" class="form-label h3">your email</label>
                            <input type="email" class="form-control" id="email_input" name="email_input" placeholder="email..." required>
                        </div>
                    </div>
                    <div class="col-6 mb-3">
                        <div class="mb-3">
                            <label for="text_input" class="form-label h3">your message</label>
                            <textarea class="form-control contact" id="text_input" name="text_input" rows="3" required></textarea>
                        </div>
                    </div>
                    <div class="col-12 d-flex justify-content-end">
                        <button type="submit" class="btn btn-outline-primary button_input">
                            <h4>send email</h4>
                        </button>
                    </div>
                </form>
            </div><!-- /row -->
        </div><!-- /container -->
        
        <!-- Modal -->
		<div class='modal fade' id='status' tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel' aria-hidden='true'>
            <div class='modal-dialog' role='document'>
              <div class='modal-content'>

                  <div id='modal-title-div'>
                      <h5 class='modal-title' id='modal-title'></h5>
                      <button type='button' class='close' data-dismiss='modal' aria-label='Close'>
                        <span aria-hidden='true'>&times;</span>
                      </button>
                  </div>

                  <div class='modal-body' id='modal-text'></div>

                    <div class='modal-footer'>
                      <button type='button' data-dismiss='modal' id='modal-btn'>Return</button>
                    </div>
              </div>
           </div>
      </div>
      <!-- /Modal -->

    </section><!-- End home -->

    <footer id="footer"><!-- Start footer -->
        <div class="container"><!-- Start container -->
            <div class="row"><!-- Start row -->
                <div class="col d-flex justify-content-start">
                    <a class="icon_social_networks" href="https://github.com/ribeiropresa">
                        <i class="fab fa-github-square fa-3x"></i>
                    </a>
                    <a class="icon_social_networks" href="https://nl.linkedin.com/in/ribeiropresa">
                        <i class="fab fa-linkedin fa-3x ml-4"></i>
                    </a>
                </div>
                <div class="col d-flex justify-content-end">
                    <img src="images/logo.png" width="50">
                </div>
            </div><!-- End row -->
        </div><!-- End container -->
    </footer><!-- End footer -->

    <!-- to send messages -->
    <script>
        window.addEventListener("DOMContentLoaded", function() {
        
            // get the form elements defined in your form HTML above
            
            var form = document.getElementById("send_message");
            var status = document.getElementById("status");
        
            // Success and Error functions for after the form is submitted
            
            function success() {
                form.reset();
                document.getElementById('modal-title').innerHTML = 'Success'
                document.getElementById('modal-title-div').className = 'modal-header text-success'
                document.getElementById('modal-text').innerHTML = 'Thanks for the message.</br>Until next message.'
                document.getElementById('modal-btn').className = 'btn btn-success'
                
                $('#status').modal('show')
            }
        
            function error() {
                document.getElementById('modal-title').innerHTML = 'Error'
                document.getElementById('modal-title-div').className = 'modal-header text-error'
                document.getElementById('modal-text').innerHTML = 'Not working!</br>Please, use other forms for contact.'
                document.getElementById('modal-btn').className = 'btn btn-error'

                $('#status').modal('show')
            }
        
            // handle the form submission event
        
            form.addEventListener("submit", function(ev) {
                ev.preventDefault();
                var data = new FormData(form);
                ajax(form.method, form.action, data, success, error);
            });
        });
        
        // helper function for sending an AJAX request
      
        function ajax(method, url, data, success, error) {
            var xhr = new XMLHttpRequest();
            xhr.open(method, url);
            xhr.setRequestHeader("Accept", "application/json");
            xhr.onreadystatechange = function() {
                if (xhr.readyState !== XMLHttpRequest.DONE) return;
                if (xhr.status === 200) {
                success(xhr.response, xhr.responseType);
                } else {
                error(xhr.status, xhr.response, xhr.responseType);
                }
            };
            xhr.send(data);
        }
    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
  </body>
</html>